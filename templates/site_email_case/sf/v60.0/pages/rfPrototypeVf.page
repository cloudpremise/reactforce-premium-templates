<apex:page controller="rfPrototypeCtrl" showHeader="false" sidebar="false" standardStylesheets="false" applyHtmlTag="true" applyBodyTag="false" docType="html-5.0" showQuickActionVfHeader="false">
    <head>
        <meta charset="utf-8"></meta>
        <meta name="viewport" content="width=device-width,initial-scale=1"></meta>
        <link rel="shortcut icon" href="./favicon.ico?v=2"></link>
        <title>rfPrototype | Salesforce</title>
    </head>
    <body class="slds-scope">
        <apex:slds />
        <div style="min-height: 100vh;" id="root"></div>

        <div class="slds-spinner_container" id="main-application-loader">
            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand" style="transform: none;width: 100px;height:86px;transform-origin: inherit;left: 0px;right: 0px;top:0px;bottom:0px;margin: auto;">
                <img src="{!URLFOR($Resource.rfPrototype, 'assets/img/reactforce_short.png')}" alt="" />
            </div>
            <style type="text/css">#main-application-loader .slds-spinner:before, #main-application-loader .slds-spinner:after {display:none;}</style>
        </div>

        <!-- Load the app from the bundle domain -->
        <apex:outputPanel rendered="{!NOT(ISBLANK(bundleDomain))}">
            <script type="text/javascript">
                function onAdapterLoaded(){
                    var mainElement = document.createElement("script");
                    mainElement.setAttribute("type", "text/javascript");
                    mainElement.setAttribute("src", "{!bundleDomain + '/assets/js/app.main.v1.js'}");
                    document.body.appendChild(mainElement);
                }
            </script>
        </apex:outputPanel>

        <!-- Load the app from the static resource -->
        <apex:outputPanel rendered="{!(ISBLANK(bundleDomain))}">
            <script type="text/javascript">
                function onAdapterLoaded(){
                    var mainElement = document.createElement("script");
                    mainElement.setAttribute("type", "text/javascript");
                    mainElement.setAttribute("src", "{!URLFOR($Resource.rfPrototype, 'assets/js/app.main.v1.js')}");
                    document.body.appendChild(mainElement);
                }
            </script>
        </apex:outputPanel>
        <script type="text/javascript" src="{!sitePath}/apex/rfPrototypeAdapter?bundleDomain={!bundleDomain}&bundleId={!bundleId}" onload="onAdapterLoaded();"></script>

    </body>
</apex:page>